{% extends 'cvdp/bt_base_site.html' %}
{% load i18n crispy_forms_tags %}

{% load allauth i18n %}

{% block head_title %}
    {% translate "Activate Two-factor Authentication" %}

{% endblock head_title %}
{% block content %}
<h2 class="text-center">
  {% translate "Activate Two-factor Authentication" %}
</h2>
    <p>
        {% blocktranslate %}To protect your account with two-factor authentication, scan the QR code below with your authenticator app. Then, input the verification code generated by the app below.{% endblocktranslate %}
    </p>
    {% url 'mfa_activate_totp' as action_url %}
    {% element form form=form method="post" action=action_url %}
        {% slot body %}
    <div class="text-center">
      {% element img src=totp_svg_data_uri alt=form.secret tags="mfa,totp,qr" %}
      </div>
            {% endelement %}
            {% csrf_token %}
<p> Secret: {{ form.secret }} </p>
{% slot help_text %}
{% translate "You can store this secret and use it to reinstall your authenticator app at a later time." %}
{% endslot %}

    {{ form|crispy }}
    {% endslot %}
        {% slot actions %}
    <button class="btn btn-primary d-grid w-100" type="submit">
      {% trans 'Activate' %}
    </button>
    {% endslot %}
    {% endelement %}
{% endblock content %}


